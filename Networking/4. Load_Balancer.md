# **Load_Balancer**
## **1. What is a Load Balancer?**

* A Load Balancer (LB) is a networking service that distributes traffic across multiple backend resources (VMs, containers, or services).

* Why it matters in this projects:

    * **High Availability:** If one VM fails, LB redirects traffic to healthy VMs.

    * **Scalability:** You can add/remove VMs without impacting users.

    * **Performance:** Prevents a single VM from being overloaded.

*Note*
```
- Your web app runs on 3 VMs. Instead of users connecting to a single VM’s IP, they connect via a Load Balancer public IP.

- The LB then spreads requests across all 3 VMs automatically.
```

## **2. Layer 4 vs Layer 7 Load Balancer**

* **Layer 4 Load Balancer (Transport Layer):**

    * Works with **IP addresses and TCP/UDP ports.**

    * Doesn’t inspect the actual web request (it only knows “traffic is on port 80/443”).

    * Example in Azure → Azure Load Balancer.

    * Project Use: Distributing generic traffic to backend VMs in a subnet.

* **Layer 7 Load Balancer (Application Layer):**

    * Understands **HTTP/HTTPS traffic.**

    * Can route requests based on **URLs, host headers, cookies.**

    * Example in Azure → Application Gateway (with Web Application Firewall option).

    * Project Use: Route /api/* requests to backend services, /app/* requests to a web server.

*Note*
```
For basic VM scaling, use Azure Load Balancer (L4).
For web applications needing intelligent routing/security, use Application Gateway (L7).
```

## 3. Azure Load Balancer vs Application Gateway vs Front Door

| Feature                      | Azure Load Balancer (L4)               | Azure Application Gateway (L7)              | Azure Front Door (Global L7)             |
| ---------------------------- | -------------------------------------- | ------------------------------------------- | ---------------------------------------- |
| **OSI Layer**                | Layer 4 (TCP/UDP)                      | Layer 7 (HTTP/HTTPS)                        | Layer 7 (HTTP/HTTPS, global scale)       |
| **Scope**                    | Regional                               | Regional                                    | Global (multi-region)                    |
| **Traffic Type**             | Any TCP/UDP traffic                    | Web traffic only (HTTP/HTTPS)               | Web traffic only (HTTP/HTTPS)            |
| **Routing Features**         | Simple traffic distribution            | Path-based, host-based routing, SSL offload | Global LB, CDN integration, caching      |
| **Security Integration**     | Works with NSGs, Firewall              | Built-in **WAF** (Web Application Firewall) | Built-in DDoS protection + WAF           |
| **Best Use Case in Project** | Distribute traffic across VM scale set | Secure, scalable web app in one region      | High availability web app across regions |


## **4. Health Probes & Backend Pools**

* **Backend Pool:**

    - A collection of servers (VMs, App Services, Containers) that receive traffic from the Load Balancer.

    - Example: In your project → 3 VMs running the web app inside the Web Subnet.

* **Health Probe:**

    - LB constantly checks if servers are “healthy.”

    - Example: Configure a probe to check http://10.0.1.4:80/health.

    - If one VM doesn’t respond → LB automatically removes it from rotation.

*Note*
```
- You’ll configure your web VMs inside a backend pool.

- Set up a health probe endpoint (/healthcheck) so that LB only routes traffic to working VMs.
```